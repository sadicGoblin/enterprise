<div class="art-modal-container">
  <!-- Header fijo -->
  <div class="dialog-header">
    <h2>Reporte de Incidente</h2>
    <button mat-icon-button class="close-button" [mat-dialog-close]="false">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <div class="art-modal-content">
    <!-- Mensaje de error de validación -->
    <div *ngIf="showValidationErrors" class="validation-errors">
      <div class="error-message">
        <mat-icon color="warn">error</mat-icon>
        <span>Por favor, corrija los siguientes errores:</span>
      </div>
      <ul>
        <li *ngFor="let error of validationErrors">{{ error }}</li>
      </ul>
    </div>

    <!-- Contenido scrolleable -->
    <div class="scrollable-content">
      <mat-tab-group>
        <mat-tab label="Datos de Reporte">
          <app-incident-form [projectId]="data?.projectId"></app-incident-form>
        </mat-tab>
        <mat-tab label="Origen">
          <app-incident-origin-selection></app-incident-origin-selection>
        </mat-tab>
        <mat-tab label="Validación">
          <app-incident-validation></app-incident-validation>
        </mat-tab>
      </mat-tab-group>
    </div>
  </div>

  <!-- Footer fijo con botones -->
  <div class="art-footer">
    <mat-divider></mat-divider>
    <div class="art-actions">
      <button mat-button [mat-dialog-close]="false" [disabled]="isSaving">
        Cancelar
      </button>
      <button
        mat-raised-button
        color="primary"
        (click)="saveReport()"
        [disabled]="isSaving"
      >
        <span *ngIf="!isSaving">Guardar Reporte</span>
        <span *ngIf="isSaving" class="loading-indicator">
          <mat-icon class="spinner">sync</mat-icon> Guardando...
        </span>
      </button>
    </div>
  </div>
</div>
