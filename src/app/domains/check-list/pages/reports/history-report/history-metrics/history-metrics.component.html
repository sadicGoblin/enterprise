<div class="metrics-container">
  <!-- Breadcrumbs para filtros activos -->
  <div class="filters-breadcrumbs" *ngIf="hierarchicalFilters && hierarchicalFilters.length > 0">
    <div class="breadcrumb-header">
      <mat-icon class="breadcrumb-icon">filter_list</mat-icon>
      <span>Filtros aplicados:</span>
    </div>
    <div class="breadcrumb-items">
      <div class="breadcrumb-item" *ngFor="let filter of hierarchicalFilters; let last = last">
        <span class="filter-type">{{filter.filterType}}</span>
        <span class="filter-count">({{filter.filters.length}})</span>
        <span class="breadcrumb-separator" *ngIf="!last">›</span>
      </div>
    </div>
  </div>

  <!-- Botón de filtros para dispositivos móviles -->
  <button class="filter-toggle-button" (click)="toggleFilterPanel()">
    <mat-icon>filter_list</mat-icon>
    <span>Filtros.</span>
  </button>
  
  <div class="metrics-layout">
    <!-- Columna/Panel de filtros (flotante en móviles) -->
    <div class="metrics-filter-column" [class.active]="filterPanelOpen">
      <div class="filter-panel-header">
        <h3>Filtros.</h3>
        <button class="close-filters" (click)="toggleFilterPanel()" mat-icon-button>
          <mat-icon>close</mat-icon>
        </button>
      </div>
      <app-metrics-filter 
        [data]="data"
        [columnsFilter]="reportConfig?.columnsFilter || []"
        (hierarchicalFiltersChange)="handleHierarchicalFiltersChange($event)">
      </app-metrics-filter>
    </div>
    
    <!-- Overlay para cerrar el panel al hacer clic fuera -->
    <div class="filter-overlay" *ngIf="filterPanelOpen" (click)="toggleFilterPanel()"></div>
    
    <!-- Columna para datos [data]="filteredData" -->
    <div class="metrics-data-column">
      <app-metrics-data 
        [data]="data"
        [activeFilters]="activeFilters"
        [hierarchicalFilters]="hierarchicalFilters"
        [reportConfig]="reportConfig">
      </app-metrics-data>
    </div>
  </div>
</div>
