<!-- Primer componente: summary-kpi con diseño idéntico al tradicional -->
<!-- IMPORTANTE: Usamos completeData (datos sin filtrar) para este componente -->
<!-- Esto garantiza que siempre muestre la distribución total de los datos -->
<app-summary-kpi 
  [completeData]="data" 
  [reportConfig]="reportConfig"
  [title]="'DISTRIBUCIÓN GLOBAL DE DATOS'">
</app-summary-kpi>


<!-- Sección dinámica de gráficos basados en filtros activos (componente completamente separado) -->
<div class="dynamic-charts-container">
  <div class="dynamic-charts-section">
    <div class="section-header dynamic-charts-header">
      <br><br>
    </div>

    <div class="dynamic-charts-grid">
      <app-dynamic-chart *ngFor="let chart of dynamicCharts" [filterType]="chart.filterType"
        [hierarchicalFilters]="_hierarchicalFilters"
        [fieldToFilter]="chart.fieldName" [completeData]="data"
        [reportConfig]="reportConfig" [title]="'KPI ' + (chart.filterType || '.')">
      </app-dynamic-chart>
    </div>
  </div>

  <ng-template #noData>
    <div class="no-data-message">
      <mat-icon>info_outline</mat-icon>
      <span>Sin datos para mostrar</span>
    </div>
  </ng-template>
</div>