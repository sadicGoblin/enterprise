<div class="chart-card kpi-dashboard-card">
  <ng-container *ngIf="hasData; else noData">
    <!-- Encabezado con título e indicador KPI -->
    <div class="chart-header">
      <div class="chart-title">
        <mat-icon>bar_chart</mat-icon>
        <h3>{{ title }}</h3>
      </div>
      
    </div>
    
    <!-- Contenido del gráfico -->
    <!-- Eliminamos restricciones de contenedor para permitir altura dinámica -->
    <div class="chart-content" style="height: auto;">
      <div class="chart-canvas-container" style="height: auto;">
        <canvas #chartCanvas style="min-height: 200px;"></canvas>
      </div>
    </div>
    
    <!-- Footer con estadísticas -->
    <div class="chart-footer" *ngIf="hasData">
      <div class="stats-container">
        <div class="stats-left">
          <span class="stat-item total-filtro" *ngIf="filterType">
            <span class="stat-label">Total {{filterType}}:</span>
            <span class="stat-value">{{totalFiltro}}</span>
          </span>
          <span class="stat-divider" *ngIf="filterType">|</span>
          <span class="stat-item">
            <span class="stat-label">Registros:</span>
            <span class="stat-value">{{totalElementos}}</span>
          </span>
        </div>
        
        <div class="stats-right">
          <ng-container *ngFor="let estado of estados; let i = index; let isLast = last">
            <span class="stat-item">
              <span class="stat-label">{{estado}}:</span>
              <span class="stat-value" [style.color]="getEstadoColor(estado, i)">{{contadorEstados[estado] || 0}}</span>
            </span>
            <span class="stat-divider" *ngIf="!isLast">|</span>
          </ng-container>
        </div>
      </div>
    </div>
    

  </ng-container>
  
  <ng-template #noData>
    <div class="no-data-container">
      <mat-icon>info</mat-icon>
      <span>No hay datos disponibles para mostrar</span>
    </div>
  </ng-template>
</div>
